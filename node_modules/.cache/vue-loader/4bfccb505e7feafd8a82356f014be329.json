{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue?vue&type=style&index=0&id=42f8494e&scoped=true&lang=css&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue","mtime":1597431752904},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGxheWVyIHsKICBoZWlnaHQ6IDQyNnB4Owp9CgoucGxheWVyID4+PiAuYWdvcmFfdmlkZW9fcGxheWVyIHsKICB3aWR0aDogNDI2cHg7CiAgaGVpZ2h0OiA0MjZweDsKICBvYmplY3QtZml0OiBjb250YWluICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["LiveViewer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"LiveViewer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    {{ endLive }}\n    {{ $store.state.currentOption }}\n    <div id=\"pre-local-player\" class=\"player w-full\"></div>\n  </div>\n</template>\n\n<script>\nimport {AGORA_APP_ID} from '@/config/agora.config'\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\n\nexport default {\n  props: ['endLive'],\n  name: \"LiveViewer\",\n  data() {\n    return {\n      client: {},\n      localStream: {\n        audioTrack: null,\n        videoTrack: null\n      },\n      localTracks: {\n        videoTrack: null,\n        audioTrack: null\n      },\n    }\n  },\n  async created() {\n    this.client = AgoraRTC.createClient({mode: 'live', codec: \"h264\", role: 'host'})\n    await this.client.join(AGORA_APP_ID, 'test1', null);\n\n    [\n      this.localTracks.audioTrack,\n      this.localTracks.videoTrack,\n    ] = await Promise.all([\n      AgoraRTC.createMicrophoneAudioTrack(),\n      AgoraRTC.createCameraVideoTrack(),\n    ]);\n\n    await this.localTracks.videoTrack.setDevice(this.$store.state.currentOption.camera.deviceId);\n\n    this.localTracks.videoTrack.play(\"pre-local-player\");\n\n    await this.client.publish(Object.values(this.localTracks));\n\n  },\n\n  methods: {\n    async leave() {\n      this.localTracks.audioTrack.stop()\n      this.localTracks.videoTrack.stop()\n      this.localTracks.audioTrack.close()\n      this.localTracks.videoTrack.close()\n      this.localTracks.audioTrack = undefined\n      this.localTracks.videoTrack = undefined\n\n      await this.client.leave();\n    }\n  },\n  watch: {\n    endLive(val) {\n      if (val === true) {\n        this.leave()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.player {\n  height: 426px;\n}\n\n.player >>> .agora_video_player {\n  width: 426px;\n  height: 426px;\n  object-fit: contain !important;\n}\n</style>"]}]}