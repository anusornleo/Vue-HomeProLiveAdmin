{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue","mtime":1597431752904},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7QUdPUkFfQVBQX0lEfSBmcm9tICdAL2NvbmZpZy9hZ29yYS5jb25maWcnCmltcG9ydCBBZ29yYVJUQyBmcm9tICJhZ29yYS1ydGMtc2RrLW5nIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydlbmRMaXZlJ10sCiAgbmFtZTogIkxpdmVWaWV3ZXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbGllbnQ6IHt9LAogICAgICBsb2NhbFN0cmVhbTogewogICAgICAgIGF1ZGlvVHJhY2s6IG51bGwsCiAgICAgICAgdmlkZW9UcmFjazogbnVsbAogICAgICB9LAogICAgICBsb2NhbFRyYWNrczogewogICAgICAgIHZpZGVvVHJhY2s6IG51bGwsCiAgICAgICAgYXVkaW9UcmFjazogbnVsbAogICAgICB9LAogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIHRoaXMuY2xpZW50ID0gQWdvcmFSVEMuY3JlYXRlQ2xpZW50KHttb2RlOiAnbGl2ZScsIGNvZGVjOiAiaDI2NCIsIHJvbGU6ICdob3N0J30pCiAgICBhd2FpdCB0aGlzLmNsaWVudC5qb2luKEFHT1JBX0FQUF9JRCwgJ3Rlc3QxJywgbnVsbCk7CgogICAgWwogICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2ssCiAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjaywKICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgIEFnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCksCiAgICAgIEFnb3JhUlRDLmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soKSwKICAgIF0pOwoKICAgIGF3YWl0IHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5zZXREZXZpY2UodGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudE9wdGlvbi5jYW1lcmEuZGV2aWNlSWQpOwoKICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5wbGF5KCJwcmUtbG9jYWwtcGxheWVyIik7CgogICAgYXdhaXQgdGhpcy5jbGllbnQucHVibGlzaChPYmplY3QudmFsdWVzKHRoaXMubG9jYWxUcmFja3MpKTsKCiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgbGVhdmUoKSB7CiAgICAgIHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5zdG9wKCkKICAgICAgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLnN0b3AoKQogICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suY2xvc2UoKQogICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2suY2xvc2UoKQogICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2sgPSB1bmRlZmluZWQKICAgICAgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrID0gdW5kZWZpbmVkCgogICAgICBhd2FpdCB0aGlzLmNsaWVudC5sZWF2ZSgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGVuZExpdmUodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxlYXZlKCkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["LiveViewer.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LiveViewer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    {{ endLive }}\n    {{ $store.state.currentOption }}\n    <div id=\"pre-local-player\" class=\"player w-full\"></div>\n  </div>\n</template>\n\n<script>\nimport {AGORA_APP_ID} from '@/config/agora.config'\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\n\nexport default {\n  props: ['endLive'],\n  name: \"LiveViewer\",\n  data() {\n    return {\n      client: {},\n      localStream: {\n        audioTrack: null,\n        videoTrack: null\n      },\n      localTracks: {\n        videoTrack: null,\n        audioTrack: null\n      },\n    }\n  },\n  async created() {\n    this.client = AgoraRTC.createClient({mode: 'live', codec: \"h264\", role: 'host'})\n    await this.client.join(AGORA_APP_ID, 'test1', null);\n\n    [\n      this.localTracks.audioTrack,\n      this.localTracks.videoTrack,\n    ] = await Promise.all([\n      AgoraRTC.createMicrophoneAudioTrack(),\n      AgoraRTC.createCameraVideoTrack(),\n    ]);\n\n    await this.localTracks.videoTrack.setDevice(this.$store.state.currentOption.camera.deviceId);\n\n    this.localTracks.videoTrack.play(\"pre-local-player\");\n\n    await this.client.publish(Object.values(this.localTracks));\n\n  },\n\n  methods: {\n    async leave() {\n      this.localTracks.audioTrack.stop()\n      this.localTracks.videoTrack.stop()\n      this.localTracks.audioTrack.close()\n      this.localTracks.videoTrack.close()\n      this.localTracks.audioTrack = undefined\n      this.localTracks.videoTrack = undefined\n\n      await this.client.leave();\n    }\n  },\n  watch: {\n    endLive(val) {\n      if (val === true) {\n        this.leave()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.player {\n  height: 426px;\n}\n\n.player >>> .agora_video_player {\n  width: 426px;\n  height: 426px;\n  object-fit: contain !important;\n}\n</style>"]}]}