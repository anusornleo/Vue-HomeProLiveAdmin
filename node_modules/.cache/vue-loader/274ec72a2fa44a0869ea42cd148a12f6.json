{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/StartLivePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/StartLivePage.vue","mtime":1597736466235},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCB7QUdPUkFfQVBQX0lEfSBmcm9tICdAL2NvbmZpZy9hZ29yYS5jb25maWcnCmltcG9ydCBBZ29yYVJUQyBmcm9tICJhZ29yYS1ydGMtc2RrLW5nIjsKaW1wb3J0IENhcmRQcm9kdWN0IGZyb20gIi4uL2NvbXBvbmVudHMvQ2FyZFByb2R1Y3QiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwoKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3RhcnRMaXZlUGFnZSIsCiAgY29tcG9uZW50czogewogICAgQ2FyZFByb2R1Y3QsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9ja1Byb2R1Y3Q6IFsKICAgICAgICB7CiAgICAgICAgICBza3U6IDEyMzI0LAogICAgICAgICAgaW1hZ2U6ICJ1cmwiLAogICAgICAgICAgYnJhbmQ6ICJicmFuZCIsCiAgICAgICAgICB0aXRsZTogInRpdGxlIiwKICAgICAgICAgIHByaWNlOiAxMjMzNCwKICAgICAgICB9LAogICAgICBdLAogICAgICBtb2RlbFRpdGxlOiAiIiwKICAgICAgY3VycmVudENhbWVyYTogbnVsbCwKICAgICAgY3VycmVudE1pY3JvcGhvbmU6IG51bGwsCiAgICAgIGN1cnJlbnRSZXNvbHV0aW9uOiBudWxsLAogICAgICBjYW1lcmFzOiBbXSwKICAgICAgbWljcm9waG9uZXM6IFtdLAogICAgICBsb2NhbFRyYWNrczogewogICAgICAgIHZpZGVvVHJhY2s6IG51bGwsCiAgICAgICAgYXVkaW9UcmFjazogewogICAgICAgICAgZ2V0Vm9sdW1lTGV2ZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHJlc29sdXRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICI3MjB4MTI4MCAxNXAiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICI3MjB4MTI4MCAzMHAiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgYXN5bmMgYmVmb3JlQ3JlYXRlKCkgewogICAgdGhpcy5jYW1lcmFzID0gYXdhaXQgQWdvcmFSVEMuZ2V0Q2FtZXJhcygpOwogICAgdGhpcy5taWNyb3Bob25lcyA9IGF3YWl0IEFnb3JhUlRDLmdldE1pY3JvcGhvbmVzKCk7CgogICAgWwogICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2ssCiAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjaywKICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgIEFnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCksCiAgICAgIEFnb3JhUlRDLmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soKSwKICAgIF0pOwoKICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5wbGF5KCJwcmUtbG9jYWwtcGxheWVyIik7CgogICAgdGhpcy5jYW1lcmFzLmxlbmd0aCA9PT0gMAogICAgICAgID8gKHRoaXMuY3VycmVudENhbWVyYSA9ICJObyBDYW1lcmEiKQogICAgICAgIDogKHRoaXMuY3VycmVudENhbWVyYSA9IHRoaXMuY2FtZXJhc1swXSk7CgogICAgdGhpcy5taWNyb3Bob25lcy5sZW5ndGggPT09IDAKICAgICAgICA/ICh0aGlzLmN1cnJlbnRNaWNyb3Bob25lID0gIk5vIE1pY3JvcGhvbmUiKQogICAgICAgIDogKHRoaXMuY3VycmVudE1pY3JvcGhvbmUgPSB0aGlzLm1pY3JvcGhvbmVzWzBdKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGN1c3RvbUNvbG9yTWV0aG9kKHBlcmNlbnRhZ2UpIHsKICAgICAgaWYgKHBlcmNlbnRhZ2UgPCAzMCkgewogICAgICAgIHJldHVybiAiI2NiZDVlMCI7CiAgICAgIH0gZWxzZSBpZiAocGVyY2VudGFnZSA8IDcwKSB7CiAgICAgICAgcmV0dXJuICIjMzhhMTY5IjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiNmNTY1NjUiOwogICAgICB9CiAgICB9LAogICAgZ29MaXZlTm93KCkgewogICAgICBsZXQgY2hhbm5lbCA9IERhdGUubm93KCkudG9TdHJpbmcoKQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1cnJlbnRPcHRpb24nLCB7CiAgICAgICAgYXBwSWQ6IEFHT1JBX0FQUF9JRCwKICAgICAgICBjYW1lcmE6IHRoaXMuY3VycmVudENhbWVyYSwKICAgICAgICBtaWNyb3Bob25lOiB0aGlzLmN1cnJlbnRNaWNyb3Bob25lLAogICAgICAgIGNoYW5uZWw6IGNoYW5uZWwsCiAgICAgICAgdGl0bGU6IHRoaXMubW9kZWxUaXRsZQogICAgICB9KQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldElzTGl2ZScsIHRydWUpCiAgICAgIGRiLmNvbGxlY3Rpb24oIkN1cnJlbnRMaXZlIikuZG9jKGNoYW5uZWwpLnNldCh7CiAgICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLAogICAgICAgIGNoYW5uZWxOYW1lOiBjaGFubmVsLAogICAgICAgIG9uTGl2ZTogdHJ1ZSwKICAgICAgICB0aXRsZTogdGhpcy5tb2RlbFRpdGxlCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ1N0YXJ0IExpdmUgU3VjY2VzcycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJ2xpdmVfbm93J30pCiAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ0Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pCiAgICB9LAogICAgZ29GaW5kUHJvZHVjdCgpIHsKICAgICAgdGhpcy5nZXRWaWRlbygpCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5fdmlkZW9IZWlnaHQpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAiZmluZHByb2R1Y3QifSk7CiAgICB9LAogICAgZ2V0VmlkZW8oKSB7CiAgICAgIGxldCB2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJyk7CiAgICAgIHZbMF0uYWRkRXZlbnRMaXN0ZW5lcigibG9hZGVkbWV0YWRhdGEiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdlID0gJyArIGUpCiAgICAgIH0sIGZhbHNlKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB2b2x1bWVUZXN0KCkgewogICAgICByZXR1cm4gdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLmdldFZvbHVtZUxldmVsKCkgKiAxMDA7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGN1cnJlbnRDYW1lcmEoY2FtZXJhKSB7CiAgICAgIHRoaXMuY3VycmVudENhbWVyYSA9IGNhbWVyYQogICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2suc2V0RGV2aWNlKGNhbWVyYS5kZXZpY2VJZCk7CiAgICB9LAogICAgY3VycmVudE1pY3JvcGhvbmUobWljcm9waG9uZSkgewogICAgICB0aGlzLmN1cnJlbnRNaWNyb3Bob25lID0gbWljcm9waG9uZQogICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suc2V0RGV2aWNlKG1pY3JvcGhvbmUuZGV2aWNlSWQpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["StartLivePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StartLivePage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-wrap items-start justify-between\">\n      <h1 class=\"text-3xl mb-6\">Start to Live</h1>\n      <div\n          @click=\"goLiveNow\"\n          class=\"text-xl items-baseline cursor-pointer bg-red-600 px-5 py-2 rounded-lg hover:bg-red-700 text-white\"\n      >\n        Start Live\n        <span class=\"material-icons\" style=\"vertical-align: bottom;margin-bottom: 6px\">live_tv</span>\n      </div>\n    </div>\n    <div class=\"flex flex-row\">\n      <div class=\"w-1/3\">\n        <div id=\"pre-local-player\" class=\"player w-full\"></div>\n      </div>\n      <div class=\"w-2/3 flex flex-wrap content-between ml-10\">\n        <div class=\"w-1/4 text-xl\">Title</div>\n        <div class=\"w-3/4\">\n          <el-input placeholder=\"Please input\" v-model=\"modelTitle\"></el-input>\n        </div>\n        <div class=\"w-1/4 text-xl\">Camera</div>\n        <div class=\"w-3/4\">\n          <el-select v-model=\"currentCamera\" placeholder=\"Select\" style=\"width:100%\">\n            <el-option\n                v-for=\"camera in cameras\"\n                :key=\"camera.id\"\n                :label=\"camera.label\"\n                :value=\"camera\"\n            ></el-option>\n          </el-select>\n        </div>\n        <div class=\"w-1/4 text-xl\">Microphone</div>\n        <div class=\"w-3/4\">\n          <el-select v-model=\"currentMicrophone\" placeholder=\"Select\" style=\"width:100%\">\n            <el-option\n                v-for=\"microphone in microphones\"\n                :key=\"microphone.id\"\n                :label=\"microphone.label\"\n                :value=\"microphone\"\n            ></el-option>\n          </el-select>\n          <div class=\"w-full h-10 mt-5\">\n            <el-progress :percentage=\"volumeTest\" :color=\"customColorMethod\" :show-text=\"false\"></el-progress>\n          </div>\n        </div>\n\n      </div>\n    </div>\n    <div class=\"flex flex-wrap items-center justify-between\">\n      <h1 class=\"text-3xl my-3\">Product in Live (12)</h1>\n      <div\n          @click=\"goFindProduct\"\n          class=\"text-xl my-3 items-baseline cursor-pointer bg-green-400 px-5 py-2 rounded-full hover:bg-green-500 text-white\"\n      >Add +\n      </div>\n    </div>\n    <div class=\"flex flex-wrap\">\n      <CardProduct v-for=\"product in mockProduct\" :key=\"product.id\" :productData=\"product\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport {AGORA_APP_ID} from '@/config/agora.config'\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport CardProduct from \"../components/CardProduct\";\nimport firebase from \"firebase\";\n\nconst db = firebase.firestore();\n\nexport default {\n  name: \"StartLivePage\",\n  components: {\n    CardProduct,\n  },\n  data() {\n    return {\n      mockProduct: [\n        {\n          sku: 12324,\n          image: \"url\",\n          brand: \"brand\",\n          title: \"title\",\n          price: 12334,\n        },\n      ],\n      modelTitle: \"\",\n      currentCamera: null,\n      currentMicrophone: null,\n      currentResolution: null,\n      cameras: [],\n      microphones: [],\n      localTracks: {\n        videoTrack: null,\n        audioTrack: {\n          getVolumeLevel: function () {\n            return 0;\n          },\n        },\n      },\n      resolutions: [\n        {\n          label: \"720x1280 15p\",\n        },\n        {\n          label: \"720x1280 30p\",\n        },\n      ],\n    };\n  },\n  async beforeCreate() {\n    this.cameras = await AgoraRTC.getCameras();\n    this.microphones = await AgoraRTC.getMicrophones();\n\n    [\n      this.localTracks.audioTrack,\n      this.localTracks.videoTrack,\n    ] = await Promise.all([\n      AgoraRTC.createMicrophoneAudioTrack(),\n      AgoraRTC.createCameraVideoTrack(),\n    ]);\n\n    this.localTracks.videoTrack.play(\"pre-local-player\");\n\n    this.cameras.length === 0\n        ? (this.currentCamera = \"No Camera\")\n        : (this.currentCamera = this.cameras[0]);\n\n    this.microphones.length === 0\n        ? (this.currentMicrophone = \"No Microphone\")\n        : (this.currentMicrophone = this.microphones[0]);\n  },\n  methods: {\n    customColorMethod(percentage) {\n      if (percentage < 30) {\n        return \"#cbd5e0\";\n      } else if (percentage < 70) {\n        return \"#38a169\";\n      } else {\n        return \"#f56565\";\n      }\n    },\n    goLiveNow() {\n      let channel = Date.now().toString()\n      this.$store.commit('setCurrentOption', {\n        appId: AGORA_APP_ID,\n        camera: this.currentCamera,\n        microphone: this.currentMicrophone,\n        channel: channel,\n        title: this.modelTitle\n      })\n      this.$store.commit('setIsLive', true)\n      db.collection(\"CurrentLive\").doc(channel).set({\n        startTime: Date.now(),\n        channelName: channel,\n        onLive: true,\n        title: this.modelTitle\n      }).then(() => {\n        this.$notify({\n          title: 'Success',\n          message: 'Start Live Success',\n          type: 'success'\n        });\n        this.$router.push({path: 'live_now'})\n      }).catch(e => {\n        this.$notify({\n          title: 'Error',\n          message: e,\n          type: 'error'\n        });\n      })\n    },\n    goFindProduct() {\n      this.getVideo()\n      // console.log(this.localTracks.videoTrack._videoHeight)\n      this.$router.push({path: \"findproduct\"});\n    },\n    getVideo() {\n      let v = document.getElementsByTagName('video');\n      v[0].addEventListener(\"loadedmetadata\", function (e) {\n        console.log('e = ' + e)\n      }, false);\n    }\n  },\n  computed: {\n    volumeTest() {\n      return this.localTracks.audioTrack.getVolumeLevel() * 100;\n    },\n  },\n  watch: {\n    currentCamera(camera) {\n      this.currentCamera = camera\n      this.localTracks.videoTrack.setDevice(camera.deviceId);\n    },\n    currentMicrophone(microphone) {\n      this.currentMicrophone = microphone\n      this.localTracks.audioTrack.setDevice(microphone.deviceId);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.player {\n  height: 426px;\n}\n\n.el-select > .el-input {\n  display: block;\n  width: 500px;\n}\n\n.player >>> .agora_video_player {\n  width: 426px;\n  height: 426px;\n  object-fit: contain !important;\n}\n\n.el-progress >>> .el-progress-bar__outer {\n  height: 20px !important;\n}\n</style>"]}]}