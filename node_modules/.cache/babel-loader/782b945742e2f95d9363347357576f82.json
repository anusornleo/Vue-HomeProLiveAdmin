{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/LiveNow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/LiveNow.vue","mtime":1597473337889},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FudXNvcm5tZW5uYWtyZWQvRG9jdW1lbnRzL1Z1ZS9saXZlLWhvbWVwcm8tYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmltcG9ydCBNZXNzYWdlIGZyb20gIkAvY29tcG9uZW50cy9NZXNzYWdlIjsKaW1wb3J0IExpdmVWaWV3ZXIgZnJvbSAiQC9jb21wb25lbnRzL0xpdmVWaWV3ZXIiOwp2YXIgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXZlTm93IiwKICBjb21wb25lbnRzOiB7CiAgICBNZXNzYWdlOiBNZXNzYWdlLAogICAgTGl2ZVZpZXdlcjogTGl2ZVZpZXdlcgogIH0sCiAgcHJvcHM6IFtdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbGllbnQ6IHt9LAogICAgICBhbGxNZXNzYWdlOiBbXSwKICAgICAgc2Nyb2xsUG9zaXRpb246IDAsCiAgICAgIC8vIHBvc2l0aW9uIG9mIHNjcm9sbCBjaGF0IHBhbmVsCiAgICAgIHNjcm9sbEhlaWdodDogMCwKICAgICAgLy8KICAgICAgY2hhdEhlaWdodDogMCwKICAgICAgLy8gaGVpZ2h0IG9mIGNoYXQgcGFuZWwKICAgICAgZW5kTGl2ZTogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDaGF0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBqb2luQ2hhbmVsOiBmdW5jdGlvbiBqb2luQ2hhbmVsKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5jbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoewogICAgICAgICAgICAgICAgICBtb2RlOiAnbGl2ZScsCiAgICAgICAgICAgICAgICAgIGNvZGVjOiAiaDI2NCIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0Q2hhdDogZnVuY3Rpb24gZ2V0Q2hhdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBkYi5jb2xsZWN0aW9uKCdjaGF0cycpLm9yZGVyQnkoInRpbWVTdGFtcCIpLm9uU25hcHNob3QoZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgc25hcHNob3QuZG9jQ2hhbmdlcygpLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnYWRkZWQnKSB7CiAgICAgICAgICAgIHZhciBkb2MgPSBjaGFuZ2UuZG9jOwoKICAgICAgICAgICAgX3RoaXMyLmFsbE1lc3NhZ2UucHVzaCh7CiAgICAgICAgICAgICAgbWVzc2FnZTogZG9jLmRhdGEoKS5tc2csCiAgICAgICAgICAgICAgdXNlcm5hbWU6IGRvYy5kYXRhKCkudXNlcm5hbWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzZXRUaW1lb3V0KF90aGlzMi5zY3JvbGxUb0VuZCwgMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNjcm9sbFRvRW5kOiBmdW5jdGlvbiBzY3JvbGxUb0VuZCgpIHsKICAgICAgdmFyIGNoYXQgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIjY2hhdCIpOwogICAgICB0aGlzLmNoYXRIZWlnaHQgPSBjaGF0Lm9mZnNldEhlaWdodDsKICAgICAgY2hhdC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmhhbmRsZVNjcm9sbCk7CgogICAgICBpZiAodGhpcy5jaGF0SGVpZ2h0ICsgdGhpcy5zY3JvbGxQb3NpdGlvbiA+PSB0aGlzLnNjcm9sbEhlaWdodCAtIDQwKSB7CiAgICAgICAgY2hhdC5zY3JvbGxUb3AgPSBjaGF0LnNjcm9sbEhlaWdodDsKICAgICAgfQoKICAgICAgdGhpcy5zY3JvbGxIZWlnaHQgPSBjaGF0LnNjcm9sbEhlaWdodDsKICAgIH0sCiAgICBoYW5kbGVTY3JvbGw6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbChlKSB7CiAgICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSBlLnRhcmdldC5zY3JvbGxUb3A7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["LiveNow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,QAAA,MAAA,kBAAA;AACA,OAAA,QAAA,MAAA,UAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AAEA,IAAA,EAAA,GAAA,QAAA,CAAA,SAAA,EAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA,OAAA;AAAA,IAAA,UAAA,EAAA;AAAA,GAFA;AAGA,EAAA,KAAA,EAAA,EAHA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,cAAA,EAAA,CAHA;AAGA;AACA,MAAA,YAAA,EAAA,CAJA;AAIA;AACA,MAAA,UAAA,EAAA,CALA;AAKA;AACA,MAAA,OAAA,EAAA;AANA,KAAA;AAQA,GAbA;AAcA,EAAA,OAdA,qBAcA;AAEA,SAAA,OAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,YAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,MAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,CAAA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,KAHA;AAIA,IAAA,OAJA,qBAIA;AAAA;;AACA,MAAA,EAAA,CAAA,UAAA,CAAA,OAAA,EAAA,OAAA,CAAA,WAAA,EAAA,UAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,UAAA,GAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,IAAA,KAAA,OAAA,EAAA;AACA,gBAAA,GAAA,GAAA,MAAA,CAAA,GAAA;;AACA,YAAA,MAAA,CAAA,UAAA,CAAA,IAAA,CAAA;AACA,cAAA,OAAA,EAAA,GAAA,CAAA,IAAA,GAAA,GADA;AAEA,cAAA,QAAA,EAAA,GAAA,CAAA,IAAA,GAAA;AAFA,aAAA;;AAIA,YAAA,UAAA,CAAA,MAAA,CAAA,WAAA,EAAA,IAAA,CAAA;AACA;AACA,SATA;AAUA,OAXA;AAYA,KAjBA;AAkBA,IAAA,WAlBA,yBAkBA;AACA,UAAA,IAAA,GAAA,KAAA,GAAA,CAAA,aAAA,CAAA,OAAA,CAAA;AACA,WAAA,UAAA,GAAA,IAAA,CAAA,YAAA;AACA,MAAA,IAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,YAAA;;AACA,UAAA,KAAA,UAAA,GAAA,KAAA,cAAA,IAAA,KAAA,YAAA,GAAA,EAAA,EAAA;AACA,QAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAAA,YAAA;AACA;;AACA,WAAA,YAAA,GAAA,IAAA,CAAA,YAAA;AACA,KA1BA;AA2BA,IAAA,YA3BA,wBA2BA,CA3BA,EA2BA;AACA,WAAA,cAAA,GAAA,CAAA,CAAA,MAAA,CAAA,SAAA;AACA;AA7BA;AAlBA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-wrap\">\n      <div class=\"bg-green-100 w-1/2\">\n        <div class=\"flex flex-wrap justify-between\">\n          <h1 class=\"text-3xl mb-6\">Start to Live</h1>\n          <div\n              @click=\"endLive = true\"\n              style=\"height: 45px\"\n              class=\"text-xl items-baseline cursor-pointer bg-red-600 px-5 py-2 rounded-lg hover:bg-red-700 text-white\"\n          >\n            End Live\n            <span class=\"material-icons\" style=\"vertical-align: bottom;margin-bottom: 6px\">live_tv</span>\n          </div>\n        </div>\n        <LiveViewer :endLive=\"endLive\"/>\n      </div>\n      <div class=\"bg-red-100 h-12 w-1/2 pl-5\">\n        <h1 class=\"text-xl mb-6 mt-2\">Comments</h1>\n        <div id=\"chat\" class=\"w-full overflow-auto\" style=\"height: 80vh;\">\n          <Message v-for=\"message in allMessage\" :key=\"message.id\" :message=\"message\"/>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport firebase from \"firebase\";\nimport Message from \"@/components/Message\";\nimport LiveViewer from \"@/components/LiveViewer\";\n\nconst db = firebase.firestore();\n\nexport default {\n  name: \"LiveNow\",\n  components: {Message, LiveViewer},\n  props: [],\n  data() {\n    return {\n      client: {},\n      allMessage: [],\n      scrollPosition: 0, // position of scroll chat panel\n      scrollHeight: 0, //\n      chatHeight: 0, // height of chat panel\n      endLive: false\n    }\n  },\n  created() {\n\n    this.getChat()\n  },\n  methods: {\n    async joinChanel() {\n      this.client = AgoraRTC.createClient({mode: 'live', codec: \"h264\"})\n    },\n    getChat() {\n      db.collection('chats').orderBy(\"timeStamp\",).onSnapshot(snapshot => {\n        snapshot.docChanges().forEach(change => {\n          if (change.type === 'added') {\n            let doc = change.doc;\n            this.allMessage.push({\n              message: doc.data().msg,\n              username: doc.data().username\n            });\n            setTimeout(this.scrollToEnd, 1000);\n          }\n        });\n      });\n    },\n    scrollToEnd() {\n      let chat = this.$el.querySelector(\"#chat\");\n      this.chatHeight = chat.offsetHeight\n      chat.addEventListener(\"scroll\", this.handleScroll);\n      if (this.chatHeight + this.scrollPosition >= this.scrollHeight - 40) {\n        chat.scrollTop = chat.scrollHeight;\n      }\n      this.scrollHeight = chat.scrollHeight\n    },\n    handleScroll(e) {\n      this.scrollPosition = e.target.scrollTop\n    },\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views"}]}