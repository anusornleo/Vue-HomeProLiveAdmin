{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/thread-loader/dist/cjs.js!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/LiveNow.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/views/LiveNow.vue","mtime":1597657854064},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2FudXNvcm5tZW5uYWtyZWQvRG9jdW1lbnRzL1Z1ZS9saXZlLWhvbWVwcm8tYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmltcG9ydCBNZXNzYWdlIGZyb20gIkAvY29tcG9uZW50cy9NZXNzYWdlIjsKaW1wb3J0IFRpbWVyIGZyb20gIkAvY29tcG9uZW50cy9UaW1lciI7IC8vIGltcG9ydCBMaXZlVmlld2VyIGZyb20gIkAvY29tcG9uZW50cy9MaXZlVmlld2VyIjsKCnZhciBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxpdmVOb3ciLAogIGNvbXBvbmVudHM6IHsKICAgIE1lc3NhZ2U6IE1lc3NhZ2UsCiAgICBUaW1lcjogVGltZXIgLy8gTGl2ZVZpZXdlcgoKICB9LAogIHByb3BzOiBbXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2xpZW50OiB7fSwKICAgICAgYWxsTWVzc2FnZTogW10sCiAgICAgIHNjcm9sbFBvc2l0aW9uOiAwLAogICAgICAvLyBwb3NpdGlvbiBvZiBzY3JvbGwgY2hhdCBwYW5lbAogICAgICBjaGF0SGVpZ2h0OiAwLAogICAgICAvLyBoZWlnaHQgb2YgY2hhdCBwYW5lbAogICAgICBzY3JvbGxIZWlnaHQ6IDAsCiAgICAgIC8vIHNjcm9sbFBvc2l0aW9uICsgY2hhdEhlaWdodAogICAgICBlbmRMaXZlOiBmYWxzZSwKICAgICAgc2VjdGlvbldpZHRoOiAwIC8vIGRlZmluZSB3aWR0aCBvZiB2aWRlbyBsaXZlCgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENoYXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGpvaW5DaGFuZWw6IGZ1bmN0aW9uIGpvaW5DaGFuZWwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7CiAgICAgICAgICAgICAgICAgIG1vZGU6ICdsaXZlJywKICAgICAgICAgICAgICAgICAgY29kZWM6ICJoMjY0IgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRDaGF0OiBmdW5jdGlvbiBnZXRDaGF0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGRiLmNvbGxlY3Rpb24oJ0N1cnJlbnRMaXZlJykuZG9jKHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRPcHRpb24uY2hhbm5lbCkuY29sbGVjdGlvbignQ2hhdHMnKS5vcmRlckJ5KCJ0aW1lU3RhbXAiKS5vblNuYXBzaG90KGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgIHNuYXBzaG90LmRvY0NoYW5nZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHsKICAgICAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZGVkJykgewogICAgICAgICAgICB2YXIgZG9jID0gY2hhbmdlLmRvYzsKCiAgICAgICAgICAgIF90aGlzMi5hbGxNZXNzYWdlLnB1c2goewogICAgICAgICAgICAgIG1lc3NhZ2U6IGRvYy5kYXRhKCkubXNnLAogICAgICAgICAgICAgIHVzZXJuYW1lOiBkb2MuZGF0YSgpLnVzZXJuYW1lCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgc2V0VGltZW91dChfdGhpczIuc2Nyb2xsVG9FbmQsIDEwMDApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzY3JvbGxUb0VuZDogZnVuY3Rpb24gc2Nyb2xsVG9FbmQoKSB7CiAgICAgIHZhciBjaGF0ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcigiI2NoYXQiKTsKICAgICAgdGhpcy5jaGF0SGVpZ2h0ID0gY2hhdC5vZmZzZXRIZWlnaHQ7CiAgICAgIGNoYXQuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy5oYW5kbGVTY3JvbGwpOwoKICAgICAgaWYgKHRoaXMuY2hhdEhlaWdodCArIHRoaXMuc2Nyb2xsUG9zaXRpb24gPj0gdGhpcy5zY3JvbGxIZWlnaHQgLSA0MCkgewogICAgICAgIGNoYXQuc2Nyb2xsVG9wID0gY2hhdC5zY3JvbGxIZWlnaHQ7CiAgICAgIH0KCiAgICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ID0gY2hhdC5zY3JvbGxIZWlnaHQ7CiAgICB9LAogICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoZSkgewogICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gZS50YXJnZXQuc2Nyb2xsVG9wOwogICAgfSwKICAgIG1hdGNoSGVpZ2h0OiBmdW5jdGlvbiBtYXRjaEhlaWdodCgpIHsKICAgICAgdGhpcy5zZWN0aW9uV2lkdGggPSB0aGlzLiRyZWZzLmluZm9Cb3guY2xpZW50V2lkdGg7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNlY3Rpb25MaXZlV2lkdGggPSB0aGlzLiRyZWZzLmluZm9Cb3guY2xpZW50V2lkdGg7CiAgICB9LAogICAgdG9FbmRMaXZlOiBmdW5jdGlvbiB0b0VuZExpdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZW5kTGl2ZSA9IHRydWU7CiAgICAgIGRiLmNvbGxlY3Rpb24oJ0N1cnJlbnRMaXZlJykuZG9jKHRoaXMuJHN0b3JlLnN0YXRlLmN1cnJlbnRPcHRpb24uY2hhbm5lbCkuZGVsZXRlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICdFbmQgTGl2ZSBDb21wbGV0ZScsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMzLiRzdG9yZS5jb21taXQoJ3NldEN1cnJlbnRPcHRpb24nLCBudWxsKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ0Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMubWF0Y2hIZWlnaHQoKTsKICB9Cn07"},{"version":3,"sources":["LiveNow.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-wrap\">\n      <div id=\"define-width\" ref=\"infoBox\" class=\"bg-green-100 w-1/2\">\n        <div class=\"flex flex-wrap justify-between\">\n          <h1 class=\"text-3xl mb-6\">Start to Live</h1>\n          <div\n              @click=\"toEndLive()\"\n              style=\"height: 45px\"\n              class=\"text-xl items-baseline cursor-pointer bg-red-600 px-5 py-2 rounded-lg hover:bg-red-700 text-white\"\n          >\n            End Live\n            <span class=\"material-icons\" style=\"vertical-align: bottom;margin-bottom: 6px\">live_tv</span>\n          </div>\n        </div>\n        <div style=\"height:460px \"></div>\n        <Timer/>\n      </div>\n      <div class=\"bg-red-100 h-12 w-1/2 pl-5\">\n        <h1 class=\"text-xl mb-6 mt-2\">Comments</h1>\n        <div id=\"chat\" class=\"w-full overflow-auto\" style=\"height: 80vh;\">\n          <Message v-for=\"message in allMessage\" :key=\"message.id\" :message=\"message\"/>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\nimport firebase from \"firebase\";\nimport Message from \"@/components/Message\";\nimport Timer from \"@/components/Timer\";\n// import LiveViewer from \"@/components/LiveViewer\";\n\nconst db = firebase.firestore();\n\nexport default {\n  name: \"LiveNow\",\n  components: {\n    Message,\n    Timer\n    // LiveViewer\n  },\n  props: [],\n  data() {\n    return {\n      client: {},\n      allMessage: [],\n      scrollPosition: 0, // position of scroll chat panel\n      chatHeight: 0, // height of chat panel\n      scrollHeight: 0, // scrollPosition + chatHeight\n      endLive: false,\n      sectionWidth: 0 // define width of video live\n    }\n  },\n  created() {\n    this.getChat()\n  },\n  methods: {\n    async joinChanel() {\n      this.client = AgoraRTC.createClient({mode: 'live', codec: \"h264\"})\n    },\n    getChat() {\n      db.collection('CurrentLive').doc(this.$store.state.currentOption.channel).collection('Chats').orderBy(\"timeStamp\",).onSnapshot(snapshot => {\n        snapshot.docChanges().forEach(change => {\n          if (change.type === 'added') {\n            let doc = change.doc;\n            this.allMessage.push({\n              message: doc.data().msg,\n              username: doc.data().username\n            });\n            setTimeout(this.scrollToEnd, 1000);\n          }\n        });\n      });\n    },\n    scrollToEnd() {\n      let chat = this.$el.querySelector(\"#chat\");\n      this.chatHeight = chat.offsetHeight\n      chat.addEventListener(\"scroll\", this.handleScroll);\n      if (this.chatHeight + this.scrollPosition >= this.scrollHeight - 40) {\n        chat.scrollTop = chat.scrollHeight;\n      }\n      this.scrollHeight = chat.scrollHeight\n    },\n    handleScroll(e) {\n      this.scrollPosition = e.target.scrollTop\n    },\n    matchHeight() {\n      this.sectionWidth = this.$refs.infoBox.clientWidth;\n      this.$store.state.sectionLiveWidth = this.$refs.infoBox.clientWidth\n    },\n    toEndLive() {\n      this.$store.state.endLive = true\n      db.collection('CurrentLive').doc(this.$store.state.currentOption.channel).delete().then(() => {\n        this.$notify({\n          title: 'Success',\n          message: 'End Live Complete',\n          type: 'success'\n        });\n        this.$store.commit('setCurrentOption', null)\n      }).catch(e => {\n        this.$notify({\n          title: 'Error',\n          message: e,\n          type: 'error'\n        });\n      })\n    }\n  },\n  mounted() {\n    this.matchHeight()\n  },\n\n}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views"}]}