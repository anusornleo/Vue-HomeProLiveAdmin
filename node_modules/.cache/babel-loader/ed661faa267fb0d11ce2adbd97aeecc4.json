{"remainingRequest":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/src/components/LiveViewer.vue","mtime":1597431752904},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anusornmennakred/Documents/Vue/live-homepro-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvVXNlcnMvYW51c29ybm1lbm5ha3JlZC9Eb2N1bWVudHMvVnVlL2xpdmUtaG9tZXByby1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbnVzb3JubWVubmFrcmVkL0RvY3VtZW50cy9WdWUvbGl2ZS1ob21lcHJvLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQUdPUkFfQVBQX0lEIH0gZnJvbSAnQC9jb25maWcvYWdvcmEuY29uZmlnJzsKaW1wb3J0IEFnb3JhUlRDIGZyb20gImFnb3JhLXJ0Yy1zZGstbmciOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnZW5kTGl2ZSddLAogIG5hbWU6ICJMaXZlVmlld2VyIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2xpZW50OiB7fSwKICAgICAgbG9jYWxTdHJlYW06IHsKICAgICAgICBhdWRpb1RyYWNrOiBudWxsLAogICAgICAgIHZpZGVvVHJhY2s6IG51bGwKICAgICAgfSwKICAgICAgbG9jYWxUcmFja3M6IHsKICAgICAgICB2aWRlb1RyYWNrOiBudWxsLAogICAgICAgIGF1ZGlvVHJhY2s6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfeWllbGQkUHJvbWlzZSRhbGwsIF95aWVsZCRQcm9taXNlJGFsbDI7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMuY2xpZW50ID0gQWdvcmFSVEMuY3JlYXRlQ2xpZW50KHsKICAgICAgICAgICAgICAgIG1vZGU6ICdsaXZlJywKICAgICAgICAgICAgICAgIGNvZGVjOiAiaDI2NCIsCiAgICAgICAgICAgICAgICByb2xlOiAnaG9zdCcKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xpZW50LmpvaW4oQUdPUkFfQVBQX0lELCAndGVzdDEnLCBudWxsKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW0Fnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCksIEFnb3JhUlRDLmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soKV0pOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF95aWVsZCRQcm9taXNlJGFsbCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX3lpZWxkJFByb21pc2UkYWxsMiA9IF9zbGljZWRUb0FycmF5KF95aWVsZCRQcm9taXNlJGFsbCwgMik7CiAgICAgICAgICAgICAgX3RoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjayA9IF95aWVsZCRQcm9taXNlJGFsbDJbMF07CiAgICAgICAgICAgICAgX3RoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjayA9IF95aWVsZCRQcm9taXNlJGFsbDJbMV07CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLnNldERldmljZShfdGhpcy4kc3RvcmUuc3RhdGUuY3VycmVudE9wdGlvbi5jYW1lcmEuZGV2aWNlSWQpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLnBsYXkoInByZS1sb2NhbC1wbGF5ZXIiKTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbGllbnQucHVibGlzaChPYmplY3QudmFsdWVzKF90aGlzLmxvY2FsVHJhY2tzKSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgbGVhdmU6IGZ1bmN0aW9uIGxlYXZlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIubG9jYWxUcmFja3MuYXVkaW9UcmFjay5zdG9wKCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2suc3RvcCgpOwoKICAgICAgICAgICAgICAgIF90aGlzMi5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLmNsb3NlKCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2suY2xvc2UoKTsKCiAgICAgICAgICAgICAgICBfdGhpczIubG9jYWxUcmFja3MuYXVkaW9UcmFjayA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIF90aGlzMi5sb2NhbFRyYWNrcy52aWRlb1RyYWNrID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5jbGllbnQubGVhdmUoKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZW5kTGl2ZTogZnVuY3Rpb24gZW5kTGl2ZSh2YWwpIHsKICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubGVhdmUoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["LiveViewer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AASA,SAAA,YAAA,QAAA,uBAAA;AACA,OAAA,QAAA,MAAA,kBAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,SAAA,CADA;AAEA,EAAA,IAAA,EAAA,YAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA;AACA,QAAA,UAAA,EAAA,IADA;AAEA,QAAA,UAAA,EAAA;AAFA,OAFA;AAMA,MAAA,WAAA,EAAA;AACA,QAAA,UAAA,EAAA,IADA;AAEA,QAAA,UAAA,EAAA;AAFA;AANA,KAAA;AAWA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,YAAA,CAAA;AAAA,gBAAA,IAAA,EAAA,MAAA;AAAA,gBAAA,KAAA,EAAA,MAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA,CAAA;AADA;AAAA,qBAEA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,YAAA,EAAA,OAAA,EAAA,IAAA,CAFA;;AAAA;AAAA;AAAA,qBAOA,OAAA,CAAA,GAAA,CAAA,CACA,QAAA,CAAA,0BAAA,EADA,EAEA,QAAA,CAAA,sBAAA,EAFA,CAAA,CAPA;;AAAA;AAAA;AAAA;AAKA,cAAA,KAAA,CAAA,WAAA,CAAA,UALA;AAMA,cAAA,KAAA,CAAA,WAAA,CAAA,UANA;AAAA;AAAA,qBAYA,KAAA,CAAA,WAAA,CAAA,UAAA,CAAA,SAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,aAAA,CAAA,MAAA,CAAA,QAAA,CAZA;;AAAA;AAcA,cAAA,KAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA,CAAA,kBAAA;;AAdA;AAAA,qBAgBA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,CAhBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA,GAlCA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA;;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA;;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA;;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA;;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,GAAA,SAAA;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,GAAA,SAAA;AANA;AAAA,uBAQA,MAAA,CAAA,MAAA,CAAA,KAAA,EARA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAVA,GApCA;AAgDA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,GADA,EACA;AACA,UAAA,GAAA,KAAA,IAAA,EAAA;AACA,aAAA,KAAA;AACA;AACA;AALA;AAhDA,CAAA","sourcesContent":["<template>\n  <div>\n    {{ endLive }}\n    {{ $store.state.currentOption }}\n    <div id=\"pre-local-player\" class=\"player w-full\"></div>\n  </div>\n</template>\n\n<script>\nimport {AGORA_APP_ID} from '@/config/agora.config'\nimport AgoraRTC from \"agora-rtc-sdk-ng\";\n\nexport default {\n  props: ['endLive'],\n  name: \"LiveViewer\",\n  data() {\n    return {\n      client: {},\n      localStream: {\n        audioTrack: null,\n        videoTrack: null\n      },\n      localTracks: {\n        videoTrack: null,\n        audioTrack: null\n      },\n    }\n  },\n  async created() {\n    this.client = AgoraRTC.createClient({mode: 'live', codec: \"h264\", role: 'host'})\n    await this.client.join(AGORA_APP_ID, 'test1', null);\n\n    [\n      this.localTracks.audioTrack,\n      this.localTracks.videoTrack,\n    ] = await Promise.all([\n      AgoraRTC.createMicrophoneAudioTrack(),\n      AgoraRTC.createCameraVideoTrack(),\n    ]);\n\n    await this.localTracks.videoTrack.setDevice(this.$store.state.currentOption.camera.deviceId);\n\n    this.localTracks.videoTrack.play(\"pre-local-player\");\n\n    await this.client.publish(Object.values(this.localTracks));\n\n  },\n\n  methods: {\n    async leave() {\n      this.localTracks.audioTrack.stop()\n      this.localTracks.videoTrack.stop()\n      this.localTracks.audioTrack.close()\n      this.localTracks.videoTrack.close()\n      this.localTracks.audioTrack = undefined\n      this.localTracks.videoTrack = undefined\n\n      await this.client.leave();\n    }\n  },\n  watch: {\n    endLive(val) {\n      if (val === true) {\n        this.leave()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.player {\n  height: 426px;\n}\n\n.player >>> .agora_video_player {\n  width: 426px;\n  height: 426px;\n  object-fit: contain !important;\n}\n</style>"],"sourceRoot":"src/components"}]}