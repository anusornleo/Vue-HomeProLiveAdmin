(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4284e514"],{"159b":function(t,e,s){var i=s("da84"),n=s("fdbc"),r=s("17c2"),a=s("9112");for(var o in n){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==r)try{a(l,"forEach",r)}catch(h){l.forEach=r}}},"17c2":function(t,e,s){"use strict";var i=s("b727").forEach,n=s("a640"),r=s("ae40"),a=n("forEach"),o=r("forEach");t.exports=a&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,s){"use strict";var i=s("23e7"),n=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},d07e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex flex-wrap"},[s("div",{ref:"infoBox",staticClass:"bg-green-100 w-1/2",attrs:{id:"define-width"}},[s("div",{staticClass:"flex flex-wrap justify-between"},[s("h1",{staticClass:"text-3xl mb-6"},[t._v("Start to Live")]),s("div",{staticClass:"text-xl items-baseline cursor-pointer bg-red-600 px-5 py-2 rounded-lg hover:bg-red-700 text-white",staticStyle:{height:"45px"},on:{click:function(e){return t.toEndLive()}}},[t._v(" End Live "),s("span",{staticClass:"material-icons",staticStyle:{"vertical-align":"bottom","margin-bottom":"6px"}},[t._v("live_tv")])])]),s("div",{staticStyle:{height:"460px"}}),s("Timer")],1),s("div",{staticClass:"bg-red-100 h-12 w-1/2 pl-5"},[s("h1",{staticClass:"text-xl mb-6 mt-2"},[t._v("Comments")]),s("div",{staticClass:"w-full overflow-auto",staticStyle:{height:"80vh"},attrs:{id:"chat"}},t._l(t.allMessage,(function(t){return s("Message",{key:t.id,attrs:{message:t}})})),1)])])])},n=[],r=(s("4160"),s("159b"),s("96cf"),s("1da1")),a=s("e671"),o=s.n(a),c=s("8aa5"),l=s.n(c),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"bg-gray-300 inline-block px-3 py-1 rounded-lg mb-3",staticStyle:{"max-width":"90%"}},[s("span",{staticClass:"text-primary font-bold"},[t._v(t._s(t.message.username))]),t._v(" : "+t._s(t.message.message)+" ")]),t._m(0)])},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"inline-block pt-0 h-full"},[s("span",{staticClass:"material-icons"},[t._v("reply")])])}],d={name:"Message",props:["message"],data:function(){return{}}},f=d,v=s("2877"),m=Object(v["a"])(f,h,u,!1,null,"6dd4ff78",null),p=m.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._v(t._s(t.hour)+":"+t._s(t.minute)+":"+t._s(t.sec))])},x=[],b={name:"Timer",data:function(){return{second:0}},created:function(){},methods:{},computed:{sec:function(){return this.$store.state.secondLive%60},minute:function(){return Math.floor(this.$store.state.secondLive/60)%60},hour:function(){return Math.floor(this.$store.state.secondLive/3600)}}},C=b,_=Object(v["a"])(C,g,x,!1,null,"7017f932",null),y=_.exports,E=l.a.firestore(),w={name:"LiveNow",components:{Message:p,Timer:y},props:[],data:function(){return{client:{},allMessage:[],scrollPosition:0,chatHeight:0,scrollHeight:0,endLive:!1,sectionWidth:0}},created:function(){this.getChat()},methods:{joinChanel:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.client=o.a.createClient({mode:"live",codec:"h264"});case 1:case"end":return e.stop()}}),e)})))()},getChat:function(){var t=this;E.collection("CurrentLive").doc(this.$store.state.currentOption.channel).collection("Chats").orderBy("timeStamp").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var s=e.doc;t.allMessage.push({message:s.data().msg,username:s.data().username}),setTimeout(t.scrollToEnd,1e3)}}))}))},scrollToEnd:function(){var t=this.$el.querySelector("#chat");this.chatHeight=t.offsetHeight,t.addEventListener("scroll",this.handleScroll),this.chatHeight+this.scrollPosition>=this.scrollHeight-40&&(t.scrollTop=t.scrollHeight),this.scrollHeight=t.scrollHeight},handleScroll:function(t){this.scrollPosition=t.target.scrollTop},matchHeight:function(){this.sectionWidth=this.$refs.infoBox.clientWidth,this.$store.state.sectionLiveWidth=this.$refs.infoBox.clientWidth},toEndLive:function(){var t=this;this.$store.state.endLive=!0,E.collection("CurrentLive").doc(this.$store.state.currentOption.channel).delete().then((function(){t.$notify({title:"Success",message:"End Live Complete",type:"success"}),t.$store.commit("setCurrentOption",null)})).catch((function(e){t.$notify({title:"Error",message:e,type:"error"})}))}},mounted:function(){this.matchHeight()}},$=w,L=Object(v["a"])($,i,n,!1,null,"3e14d710",null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-4284e514.bfe6ec89.js.map