(function(e){function t(t){for(var n,i,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);h&&h(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},i={app:0},o={app:0},a=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0ccbf6":"960d05d9","chunk-2d21a3d2":"d3b603f1","chunk-38235306":"ff990cca","chunk-3ed13ba2":"59b32f4d","chunk-4284e514":"bfe6ec89"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-3ed13ba2":1};i[e]?t.push(i[e]):0!==i[e]&&r[e]&&t.push(i[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d0ccbf6":"31d6cfe0","chunk-2d21a3d2":"31d6cfe0","chunk-38235306":"31d6cfe0","chunk-3ed13ba2":"e1e3fdf8","chunk-4284e514":"31d6cfe0"}[e]+".css",o=s.p+n,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===n||l===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete i[e],h.parentNode.removeChild(h),r(a)},h.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(h);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,r[1](d)}o[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),i=r.n(n);i.a},1:function(e,t){},"49f4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("SideBar"),e.$store.state.isLive?r("LiveViewer",{attrs:{endLive:!1}}):e._e(),r("div",{staticClass:"pt-4 pl-26 pr-6"},[r("router-view")],1)],1)},o=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bg-primary w-20 h-screen fixed"},e._l(e.listMenu,(function(t){return r("div",{key:t.id},[r("div",{staticClass:"w-20 h-20 bg-primary hover:bg-primary_select cursor-pointer",class:e.active(t.href)?"bg-primary_active":"bg-primary",on:{click:function(r){return e.goto(t.href)}}},[r("span",{staticClass:"absolute material-icons mt-5 text-center w-20 text-white"},[e._v(e._s(t.icon))]),"/startlive"===t.href&&e.$store.state.isLive?r("div",{staticClass:"absolute w-20 text-center mt-12 text-white flex"},[r("span",{staticClass:"ml-2 material-icons text-red-500"},[e._v("fiber_manual_record")]),r("div",[e._v(e._s(t.title))])]):r("div",{staticClass:"absolute w-20 text-center mt-12 text-white"},[e._v(e._s(t.title))])])])})),0)},c=[],s={name:"SideBar",data:function(){return{listMenu:[{title:"Home",href:"/",icon:"home"},{title:"Live",href:"/startlive",icon:"live_tv"},{title:"Setting",href:"/setting",icon:"settings"}]}},methods:{goto:function(e){this.$route.path!==e&&(console.log(e),"/startlive"===e?!1===this.$store.state.isLive?this.$router.push({path:"/startlive"}):this.$router.push({path:"/live_now"}):this.$router.push({path:e}))},active:function(e){return"/startlive"===e&&"/live_now"===this.$route.path||this.$route.path===e}}},u=s,l=r("2877"),d=Object(l["a"])(u,a,c,!1,null,null,null),h=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"player",class:{overlap:"/live_now"!==e.$route.path},style:"width:"+e.setWidth+"px;height:"+e.setHeight+"px",attrs:{id:"pre-local-player"}}),e._m(0)])},p=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("video",{staticClass:"video-js vjs-default-skin",staticStyle:{display:"none"},attrs:{id:"myVideo",playsinline:""}},[r("p",{staticClass:"vjs-no-js"},[e._v(" To view this video please enable JavaScript, or consider upgrading to a web browser that "),r("a",{attrs:{href:"https://videojs.com/html5-video-support/",target:"_blank"}},[e._v("supports HTML5 video.")])])])}],v=(r("a15b"),r("d3b7"),r("07ac"),r("3ca3"),r("ddb0"),r("3835")),m=(r("96cf"),r("1da1")),g=r("d13a"),b=r("e671"),k=r.n(b),y=(r("fda2"),r("d52a"),r("f0e2")),w=(r("d093"),r("a9ee")),T=r.n(w),_=(r("3966"),{name:"LiveViewer",data:function(){return{client:{},localStream:{audioTrack:null,videoTrack:null},localTracks:{videoTrack:null,audioTrack:{getVolumeLevel:function(){return 0}}},interval:null,player:"",isSaveDisabled:!0,isStartRecording:!1,videoWidth:0,videoHeight:0,options:{controls:!0,bigPlayButton:!1,controlBar:{deviceButton:!1,recordToggle:!1,pipToggle:!1},width:100,height:100,fluid:!0,plugins:{record:{pip:!1,audio:!0,video:!0,maxLength:3e3,debug:!0}}}}},created:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.client=k.a.createClient({mode:"live",codec:"h264",role:"host"}),t.next=3,e.client.join(g["a"],"test1",null);case 3:return t.next=5,Promise.all([k.a.createMicrophoneAudioTrack(),k.a.createCameraVideoTrack()]);case 5:return r=t.sent,n=Object(v["a"])(r,2),e.localTracks.audioTrack=n[0],e.localTracks.videoTrack=n[1],e.setCamera(),e.localTracks.videoTrack.play("pre-local-player"),t.next=13,e.client.publish(Object.values(e.localTracks));case 13:e.startRecording(),e.start(),setTimeout(e.getWidth,100);case 16:case"end":return t.stop()}}),t)})))()},methods:{setCamera:function(){this.localTracks.videoTrack.setDevice(this.$store.state.currentOption.camera.deviceId),this.localTracks.audioTrack.setDevice(this.$store.state.currentOption.microphone.deviceId)},leave:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.localTracks.audioTrack.stop(),e.localTracks.videoTrack.stop(),e.localTracks.audioTrack.close(),e.localTracks.videoTrack.close(),e.localTracks.audioTrack=void 0,e.localTracks.videoTrack=void 0,t.next=8,e.client.leave();case 8:case"end":return t.stop()}}),t)})))()},startRecording:function(){this.isStartRecording=!0,this.player.record().getDevice()},stopRecord:function(){this.isStartRecording=!1,this.player.record().stop(),setTimeout(this.submitVideo,1e3)},submitVideo:function(){this.player.record().saveAs({video:"my-video-file-name.mp4"})},goHome:function(){this.$router.push({path:"/"})},getWidth:function(){this.videoWidth=this.localTracks.videoTrack._videoWidth,this.videoHeight=this.localTracks.videoTrack._videoHeight},customColorMethod:function(e){return e<30?"#cbd5e0":e<70?"#38a169":"#f56565"},start:function(){var e=this;this.$store.state.secondLive=0,this.interval=setInterval((function(){e.continueTime()}),1e3)},continueTime:function(){this.$store.state.secondLive+=1}},mounted:function(){var e=this;this.player=Object(y["default"])("myVideo",this.options,(function(){var e="Using video.js "+y["default"].VERSION+" with videojs-record "+y["default"].getPluginVersion("record")+" and recordrtc "+T.a.version;y["default"].log(e)})),this.player.on("deviceReady",(function(){e.player.record().start(),console.log("device ready:")})),this.player.on("deviceError",(function(){console.log("device error:",e.player.deviceErrorCode)})),this.player.on("error",(function(e,t){console.error(t)})),this.player.on("startRecord",(function(){console.log("started recording!")})),this.player.on("finishRecord",(function(){e.isSaveDisabled=!1,console.log("finished recording: ",e.player.recordedData)}))},computed:{endLive:function(){return this.$store.state.endLive},setWidth:function(){return"/live_now"!==this.$route.path?this.videoWidth/4:this.$store.state.sectionLiveWidth},setHeight:function(){return"/live_now"!==this.$route.path?this.videoHeight/4:460},volumeTest:function(){return 100*this.localTracks.audioTrack.getVolumeLevel()}},watch:{endLive:function(e){!0===e&&(this.stopRecord(),this.leave(),this.$store.state.endLive=!1,this.$store.commit("setIsLive",!1),clearInterval(this.interval))}}}),L=_,j=(r("6415"),Object(l["a"])(L,f,p,!1,null,"1d97ec38",null)),x=j.exports,S={components:{SideBar:h,LiveViewer:x}},C=S,O=(r("034f"),Object(l["a"])(C,i,o,!1,null,null,null)),$=O.exports,R=r("8c4f"),E=function(){return r.e("chunk-2d21a3d2").then(r.bind(null,"bb51"))},P=function(){return r.e("chunk-3ed13ba2").then(r.bind(null,"090b"))},H=function(){return r.e("chunk-2d0ccbf6").then(r.bind(null,"4ef5"))},I=function(){return r.e("chunk-38235306").then(r.bind(null,"4c08"))},V=function(){return r.e("chunk-4284e514").then(r.bind(null,"d07e"))};n["default"].use(R["a"]);var B=[{path:"/",name:"Home",component:E},{path:"/startlive",name:"StartLivePage",component:P},{path:"/setting",name:"Setting",component:H},{path:"/findproduct",name:"FindProduct",component:I},{path:"/live_now",name:"LiveNow",component:V}],W=new R["a"]({mode:"history",routes:B}),A=W,D=r("2f62"),M=r("bfa9");n["default"].use(D["a"]);var N=new D["a"].Store({state:{currentMenu:0,currentOption:null,isLive:!1,endLive:!1,sectionLiveWidth:!1,secondLive:0},mutations:{setCurrentOption:function(e,t){e.currentOption=t},setIsLive:function(e,t){e.isLive=t}},actions:{},modules:{},plugins:[(new M["a"]).plugin]}),J=r("5c96"),U=r.n(J),q=(r("c898"),r("49f4"),{apiKey:"AIzaSyC3_o45u1SrHRWUJ6C4DZ5t2mwcTXwNGBs",authDomain:"homeprolive-793f0.firebaseapp.com",databaseURL:"https://homeprolive-793f0.firebaseio.com",projectId:"homeprolive-793f0",storageBucket:"homeprolive-793f0.appspot.com",messagingSenderId:"684192046274",appId:"1:684192046274:web:fbfba5bfa8c58ae5c2ef5b"}),z=r("8aa5"),F=r.n(z);n["default"].config.productionTip=!0,F.a.initializeApp(q),n["default"].use(U.a),new n["default"]({router:A,store:N,render:function(e){return e($)}}).$mount("#app")},6415:function(e,t,r){"use strict";var n=r("e210"),i=r.n(n);i.a},"85ec":function(e,t,r){},c898:function(e,t,r){},d13a:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="4bdddbacc9f24b2584de36f55a9f75de"},e210:function(e,t,r){}});
//# sourceMappingURL=app.2adc0517.js.map